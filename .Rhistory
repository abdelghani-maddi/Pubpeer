.id <- ".id"
id_as_factor <- FALSE
} else {
id_as_factor <- TRUE
}
list_to_dataframe(res, attr(.data, "split_labels"), .id, id_as_factor)
}
s3 <- ldply(list_data[1:5])
View(ldply)
View(s3)
s3 <- as_tibble(list_data[1:5])
s3 <- as_tibble(list_data[[1:5]])
s3 <- enframe(list_data[1:5])
View(s3)
View(s3[[2]][[1]])
s3 <- enframe(list_data)
View(s3)
View(s3[[2]][[8]])
names(s3) = c("publication", "liens")
View(s3)
dbWriteTable(con, "publi_liens_commentaires", s3)
View(s3)
View(s3[[2]][[1]])
as.vector.data.frame(s3$liens)
s4 = as.vector.data.frame(s3$liens)
View(s4)
s4 = unlist(s3$liens)
s4 = unlist(s3$liens[1])
s4 = data.frame(unlist(s3$liens[1]))
View(s4)
row.names.data.frame(s3) = s3$publication
row.names(s3) = s3$publication
View(s3)
rownames(s3) = s3$publication
View(s3[[2]][[3]])
View(s3[[2]][[1]])
str(s3)
s4 <- as.data.frame(s3)
View(s4)
str(s4)
class(s4)
class(s3)
unlist(s4)
s5 <- unlist(s4)
s5 <- data.frame(unlist(s4))
View(s5)
s5 <- data.frame(unlist(s4$publication), unlist(s4$liens))
s5 <- data.frame(unlist(s4$liens))
View(s5)
s6 <- subset(s4$publication)
s6 <- s4$publication
View(s3)
View(s3[[2]][[1]])
s3[[2]][[1]]
View(s3[[2]][[1]])
View(s3[[2]][[2]])
row.names(s5) = substr(rownames(s5,1,13))
row.names(s5) = substr(rownames(s5),1,13)
rownames(s5)
View(s)
View(s2)
View(s3)
View(s3[[2]][[4]])
s3 <- enframe(list_data, name = c("publication", "liens"))
s3 <- enframe(list_data)
s3b <- deframe(s3)
View(s3b)
class(s3)
s3 <- as.data.frame(enframe(list_data))
names(s3) = c("publication", "liens")
class(s3)
rownames(s3) = s3$publication
class(s3)
split.data.frame(s3)
split(s3$liens, s3$publication)
s4 = split(s3$liens, s3$publication)
View(s4)
s4 = split(s3$liens[1], s3$publication)
s4 = split(s3$liens[1], s3$publication[1])
View(s4)
s4[["1247"]]
s5 = unlist(s4)
s5
s5 = data.frame(unlist(s4))
View(s5)
s4 = split(s3$liens, s3$publication)
s5 = data.frame(unlist(s4))
View(s5)
s6 = data.frame(row.names(s5), s5)
View(s6)
View(s6)
names(s6) <- c("publication", "liens")
split(s6$publication, '.' , simplify = TRUE)
split(s6$publication, '.')
s7 <- split(s6$publication, '.d')
View(s7)
s7 <- str_split(s6$publication, '.d')
s6 = data.frame(str_split(row.names(s5), '.d'), s5)
row.names(s5[1])
s6 = data.frame(str_split(row.names(s5), '.d', simplify = T), s5)
View(s6)
names(s6) <- c("publication", "ne_pas_prendre","liens")
dbWriteTable(con, "liens_com", s6)
##### Extraire nom du site
s7 = data.frame(str_split(s6, "/"))
##### Extraire nom du site
s7 = data.frame(str_split(s6, "//"))
View(s7)
##### Extraire nom du site
s7 = data.frame(s6$publication, str_split(s6$liens, "//"))
##### Extraire nom du site
s7 = data.frame(str_split(s6$liens, "//"))
##### Extraire nom du site
s7 = data.frame(str_split(s6$liens, "/"))
##### Extraire nom du site
s7 = data.frame(str_split(s6$liens, "/", simplify = T))
View(s7)
##### Extraire nom du site
s7 = data.frame(s6$publication, str_split(s6$liens, "/", simplify = T))
View(s7)
s8 <- data.frame(s7$s6.publication, s7$X3)
names(s8) <- c("publication","site")
View(s8)
dbWriteTable(con, "liens_com_nettoyes", s8)
s8 <- data.frame(as.numeric(s7$s6.publication), s7$X3)
names(s8) <- c("publication","site")
dbWriteTable(con, "liens_com_nettoyes", s8)
dbWriteTable(con, "liens_com_nettoyes", s8)
s9 <- gsub("  ", " ",s8, "[[:punct:]]", ""))))
s9 <- gsub("  ", " ",(str_replace_all((s8), "[[:punct:]]", ""))))
s9 <- gsub("  ", " ",(str_replace_all(s8$site, "[[:punct:]]", "")))
s9 <- data.frame(s8$publication,gsub("  ", " ",(str_replace_all(s8$site, "[[:punct:]]", ""))))
dbWriteTable(con, "liens_com_nettoyes", s9)
names(s9) <- c("publication","site")
dbWriteTable(con, "liens_com_nettoyes", s9)
dbWriteTable(con, "liens_com_nettoyes", s9)
View(s9)
library(questionr)
data(hdv2003)
# Si vous avez du mal à l'installer, utiliser cette ligne de commande pour commencer :
hdv2003 <- read.table("https://raw.githubusercontent.com/abdelghani-maddi/Cours_R_Sorbonne_U/main/Jeux%20de%20donn%C3%A9es/hdv2003.csv?token=GHSAT0AAAAAAB5PIGO5HMVWIPUZPT3SQAHSY6JKHOQ", sep = ",", header = T)[,-1]
View(hdv2003) #Visualiser les données
head(hdv2003) #Afficher les premières lignes d'un tableau de données
tail(hdv2003, 2) #Afficher les dernières lignes d'un tableau de données (ici, on lui a demandé les 2 dernières)
#### Utilisation du package "dplyr" : qui permet, entre autres, de visualiser rapidement et de manière condensée le contenu d’un tableau de données
library(dplyr)
glimpse(hdv2003)
# Si vous ne pouvez pas installer le package, utiliser pour l'instant ce petit script pour récupérer les données:
hdv2003 = read.csv2("https://raw.githubusercontent.com/abdelghani-maddi/Cours_R_Sorbonne_U/main/Jeux%20de%20donn%C3%A9es/hdv2003.csv", sep = ",")[,-1]
for (i in c(3:4, 6:7, 9:19)) {
hdv2003[i] <- data.frame(as.factor(hdv2003[,i]))}
describe(hdv2003)
look_for(hdv2003)
describe(hdv2003$sexe)
describe(hdv2003$nivetud)
describe(hdv2003$nivetud, order_by(2))
describe(hdv2003$nivetud)
??describe
df <- data.frame(describe(hdv2003$nivetud))
df <- as.data.frame(describe(hdv2003$nivetud))
df <- describe(hdv2003$sexe)
df2 <- as.data.frame(df)
View(s6)
View(s7)
s6[19160]
s6[19160,]
exclure <- c(")", "![](http:", "![file](https:")
subset(s8, site != exclure)
exclure <- c(")", "![](http:", "![file](https:", " ", ")![file](![https:", ")![file](https:", ").")
s8 <- data.frame(as.numeric(s7$s6.publication), s7$X3) %>%
names() <- c("publication","site")
s8 <- data.frame(as.numeric(s7$s6.publication), s7$X3) %>%
names() <- c("publication","site")
data.frame(as.numeric(s7$s6.publication), s7$X3) %>%
names() <- c("publication","site")
s8 <- data.frame(as.numeric(s7$s6.publication), s7$X3) %>%
names() = c("publication","site")
data.frame(as.numeric(s7$s6.publication), s7$X3) %>%
names() = c("publication","site")
s8 <- data.frame(as.numeric(s7$s6.publication), s7$X3) %>%
s8 %>%
names() = c("publication","site") %>%
subset(., site != exclure)
s8 %>%
names() = c("publication","site")
s8 %>%
names() = c("publication","site") %>%
subset(., .$site != exclure)
s8 %>%
names() = c("publication","site") %>%
subset(., .site != exclure)
s8 <- data.frame(as.numeric(s7$s6.publication), s7$X3) %>%
s8 %>%
names() = c("publication","site") %>%
subset(., . != exclure)
subset(s8, site != exclure)
s8 %>%
names() = c("publication","site") %>%
subset(., . != exclure)
s8 <- data.frame(as.numeric(s7$s6.publication), s7$X3) %>%
names() = c("publication","site")
s8 %>%
subset(., . != exclure)
s8 %>%
subset(., . != exclure)
s8 %>%
subset(., . != exclure) %>%
data.frame()
s8 %>%
subset(., . != exclure) %>%
df <- data.frame()
s8 %>%
subset(., . != exclure) %>%
df = data.frame()
df <- s8 %>%
subset(., . != exclure)
View(df)
df <- s8 %>%
subset(., != exclure)
df <- s8 %>%
subset(., .$site != exclure)
df <- s8 %>%
subset(., .$site != "exclure")
df <- s8 %>%
subset(., .$site != ")")
View(df)
df <- s8 %>%
subset(., .$site != c(")", "![](http:", "![file](https:", " ", ")![file](![https:", ")![file](https:", ")."))
df <- s8 %>%
subset(., .$site != c(")", "![](http:", "![file](https:", " ", ")![file](![https:", ")![file](https:", ")."))
df <- s8 %>%
subset(., .$site %in% c(")", "![](http:", "![file](https:", " ", ")![file](![https:", ")![file](https:", ")."))
View(df)
df <- s8 %>%
subset(., .$site %!in% c(")", "![](http:", "![file](https:", " ", ")![file](![https:", ")![file](https:", ")."))
df <- s8 %>%
subset(., .$site %not in% c(")", "![](http:", "![file](https:", " ", ")![file](![https:", ")![file](https:", ")."))
`%not_in%` <- purrr::negate(`%in%`)
df <- s8 %>%
subset(., .$site %not_in% c(")", "![](http:", "![file](https:", " ", ")![file](![https:", ")![file](https:", ")."))
View(df)
exclure <- c(")", "![](http:", "![file](https:", " ", ")![file](![https:", ")![file](https:", ").","	)![](http:","2F")
df <- s8 %>%
subset(., .$site %not_in% exclure)
View(df)
exclure
exclure <- c(")", "![](http:", "![file](https:", "  ", ")![file](![https:", ")![file](https:", ").","	)![](http:","2F")
exclure
df <- s8 %>%
subset(., .$site %not_in% exclure)
df <- s8 %>%
subset(., .$site %not_in% exclure)
View(df)
df <- s8 %>%
subset(., .$site %in% exclure)
View(df)
df <- s8 %>%
gsub(" ","",.) %>%
subset(., .$site %not_in% exclure)
df <- s8 %>%
gsub(" ","",.) %>%
subset(., .$site %not_in% exclure)
df <- s8 %>%
gsub(" ","",.) %>%
df <- s8 %>%
gsub(" ","",.)
gsub(" ","",.$site)
df <- s8 %>%
mutate(across(where(is.character), str_trim))
View(df)
df <- s8 %>%
mutate(across(where(is.character), str_trim)) %>%
subset(., .$site %not_in% exclure)
View(df)
exclure <- c(")",
"![](http:",
"![file](https:",
")![file](![https:",
")![file](https:",
").",
"	)![](http:",
"2F",
")![](http:",
")2F,",
")https:"
)
exclure
df <- s8 %>%
mutate(across(where(is.character), str_trim)) %>%
subset(., .$site %not_in% exclure)
View(df)
exclure <- c(")",
"![](http:",
"![file](https:",
")![file](![https:",
")![file](https:",
").",
"),",
"	)![](http:",
"2F",
")![](http:",
")2F,",
")https:",
")](http:"
)
exclure
df <- s8 %>%
mutate(across(where(is.character), str_trim)) %>%
subset(., .$site %not_in% exclure)
View(df)
df <- s8 %>%
mutate(across(where(is.character), str_trim)) %>%
subset(., .$site %not_in% exclure)
View(df)
fd[19160,]
dd[19160,]
df[19160,]
df[publication==114297]
df[publication==114297]
df[publication=="114297"]
df[df$publication=="114297"]
df$publication == 114297
df$publication = 114297
df <- s8 %>%
mutate(across(where(is.character), str_trim)) %>%
subset(., .$site %not_in% exclure)
View(df)
df[19160,]
df[19100,]
df[19142,]
df <- s8 %>%
mutate(across(where(is.character), str_trim)) %>%
subset(., .$site %not_in% exclure) %>%
drop_na()
View(hdv2003)
View(df)
df <- s8 %>%
mutate(across(where(is.character), str_trim)) %>%
subset(., .$site %not_in% exclure) %>%
drop.terms()
View(df)
df <- s8 %>%
mutate(across(where(is.character), str_trim)) %>%
subset(., .$site %not_in% exclure) %>%
na.omit()
df <- s8 %>%
mutate(across(where(is.character), str_trim)) %>%
subset(., .$site %not_in% exclure) %>%
na.rm()
df <- s8 %>%
# mutate(across(where(is.character), str_trim)) %>%
subset(., .$site %not_in% exclure) %>%
na.rm()
df <- s8 %>%
# mutate(across(where(is.character), str_trim)) %>%
subset(., .$site %not_in% exclure) %>%
na.rm()
View(df)
df[19142,]
df <- s8 %>%
# mutate(across(where(is.character), str_trim)) %>%
subset(., .$site %not_in% exclure) %>%
subset(., .$publication %not_in% 19142)
View(df)
df <- s8 %>%
# mutate(across(where(is.character), str_trim)) %>%
subset(., .$site %not_in% exclure) %>%
subset(., .$publication %not_in% "19142")
df <- s8 %>%
# mutate(across(where(is.character), str_trim)) %>%
subset(., .$site %not_in% exclure) %>%
subset(., .$publication %in% "19142")
df <- s8 %>%
# mutate(across(where(is.character), str_trim)) %>%
subset(., .$site %not_in% exclure) %>%
subset(., .$publication %in% 19142)
df <- s8 %>%
# mutate(across(where(is.character), str_trim)) %>%
subset(., .$site %not_in% exclure) %>%
subset(., .$publication %in% 19160)
df <- s8 %>%
# mutate(across(where(is.character), str_trim)) %>%
subset(., .$site %not_in% exclure) %>%
subset(., .$publication %in% 19160)
View(df)
df <- s8 %>%
# mutate(across(where(is.character), str_trim)) %>%
subset(., .$site %not_in% exclure) %>%
subset(., .$publication == 19160)
df <- s8 %>%
# mutate(across(where(is.character), str_trim)) %>%
subset(., .$site %not_in% exclure) %>%
subset(., .$publication == 19160)
df <- s8 %>%
# mutate(across(where(is.character), str_trim)) %>%
subset(., .$site %not_in% exclure) %>%
subset(., .$publication == "19160")
df <- s8 %>%
# mutate(across(where(is.character), str_trim)) %>%
subset(., .$site %not_in% exclure) %>%
#subset(., .$publication == "19160")
dbWriteTable(con, "liens_com_nettoyes", s9)
df <- s8 %>%
# mutate(across(where(is.character), str_trim)) %>%
subset(., .$site %not_in% exclure)
View(df)
df <- s8 %>%
# mutate(across(where(is.character), str_trim)) %>%
subset(., .$site %not_in% exclure)
df <- s8 %>%
# mutate(across(where(is.character), str_trim)) %>%
subset(., .$site %not_in% exclure) %>%
subset(., .$publication == "114297")
View(df)
df <- s8 %>%
# mutate(across(where(is.character), str_trim)) %>%
subset(., .$site %not_in% exclure) %>%
subset(., row_number() == "19142")
df <- s8 %>%
# mutate(across(where(is.character), str_trim)) %>%
subset(., .$site %not_in% exclure) %>%
subset(., row_number(.) == "19142")
df <- s8 %>%
# mutate(across(where(is.character), str_trim)) %>%
subset(., .$site %not_in% exclure) %>%
subset(., row_number(.) == "19142")
View(df)
df <- s8 %>%
# mutate(across(where(is.character), str_trim)) %>%
subset(., .$site %not_in% exclure) %>%
subset(., row_number(.) == "19160")
View(df)
df <- s8 %>%
# mutate(across(where(is.character), str_trim)) %>%
subset(., .$site %not_in% exclure) %>%
subset(., row_number(.) == 19160)
View(df)
df <- s8 %>%
# mutate(across(where(is.character), str_trim)) %>%
subset(., .$site %not_in% exclure)
View(df)
df <- s8 %>%
# mutate(across(where(is.character), str_trim)) %>%
subset(., .$site %not_in% exclure) %>%
subset(., row.names(.) == 19160)
View(df)
df <- s8 %>%
# mutate(across(where(is.character), str_trim)) %>%
subset(., .$site %not_in% exclure) %>%
subset(., row.names(.) != 19160)
View(df)
dbWriteTable(con, "liens_com_nettoyes", df)
dbWriteTable(con, "liens_com_nettoyes", df)
dbWriteTable(con, "liens_com_nettoyes", df)
dbWriteTable(con, "liens_com_nettoyes", df)
dbWriteTable(con, "liens_com_nettoyes", df)
subset(., .$publication %in% 19142)
dbWriteTable(con, "liens_com_nettoyes", df)
df <- s8 %>%
subset(., .$site %not_in% exclure) %>%
subset(., row.names(.) != 19160) %>%
gsub("www.", "", .)
df <- s8 %>%
subset(., .$site %not_in% exclure) %>%
subset(., row.names(.) != 19160) %>%
gsub("www.", "", .$site)
df <- s8 %>%
subset(., .$site %not_in% exclure) %>%
subset(., row.names(.) != 19160) %>%
str_replace_all(.$site,"www.", "")
df <- s8 %>%
subset(., .$site %not_in% exclure) %>%
subset(., row.names(.) != 19160) %>%
str_replace_all(.$site,"www." , "")
df <- s8 %>%
subset(., .$site %not_in% exclure) %>%
subset(., row.names(.) != 19160) %>%
str_replace(.$site,"www." , "")
df <- s8 %>%
subset(., .$site %not_in% exclure) %>%
subset(., row.names(.) != 19160) %>%
str_replace(.$site,"www." , "")
df <- s8 %>%
subset(., .$site %not_in% exclure) %>%
subset(., row.names(.) != 19160)
View(s7)
df$site
str_replace_all(df$site, "%twit%", "twiter")
str_replace_all(df$site, "%pubpeer%", "pubpeer")
str_replace_all(df$site, regex("%pubpeer%"), "pubpeer")
str_replace_all(df$site, "%pubpeer%", "ttttt")
str_replace_all(df$site, "%pubpeer%", "ttttt")
str_replace_all(df$site, "pubpeer.com", "ttttt")
str_replace_all(df$site, pattern = "%pubpeer%", remplacement = "pubpeer")
str_replace_all(df$site, pattern = "%pubpeer%", replacement = "pubpeer")
extract(data = df, col = site, regex = "%pubpeer%")
str_contains(df$site, "%pubpeer%", ignore.case = T, switch = F)
contains(df$site, "%pubpeer%")
df %>% select(starts_with("pubpeer"))
df %>% select(starts_with("pubpeer%"))
df$site %>% select(starts_with("pubpeer%"))
df %>% select(contains("pubpeer%"))
gsub("%pubpeer%", "pubpeeer",df, ignore.case = T)
subset(df, df$site %like% "%pubpeer%")
a <- subset(df, df$site %like% "%pubpeer%")
View(a)
harmoniser <- c("%pubpeer%", "%twit%", "%yout%")
a <- subset(df, df$site %like% "%pubpeer%")
a <- subset(df, df$site %like% harmoniser)
View(a)
View(s8)
View(a)
